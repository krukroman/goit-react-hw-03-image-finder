(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{16:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(3),c=a.n(o),s=(a(16),a(4)),l=a(5),i=a(7),u=a(6),h=a(1),m=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={searchQuery:""},e.handleChange=function(t){var a=t.target.value;e.setState({searchQuery:a})},e.handleSubmit=function(t){t.preventDefault();var a=e.state.searchQuery;e.props.onSubmit(a.toLocaleLowerCase()),e.setState({searchQuery:""})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.searchQuery,t=this.handleSubmit,a=this.handleChange;return Object(h.jsx)("header",{className:"Searchbar",children:Object(h.jsxs)("form",{className:"SearchForm",onSubmit:t,children:[Object(h.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(h.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(h.jsx)("input",{className:"SearchForm-input",type:"text",onChange:a,value:e,autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}}]),a}(r.Component),g=a(8);function p(e,t,a){var r=new URLSearchParams({image_type:"photo",orientation:"horizontal",q:e,page:t,per_page:a,key:"22968380-c77365a0aacae74fb17ed9f87"}),n="".concat("https://pixabay.com/api/?").concat(r);return fetch(n).then((function(e){return e.ok?e.json():Promise.reject(new Error("Somthing goes wrong"))}))}function d(e){var t=e.previewUrl,a=e.originUrl,r=e.tags,n=e.onClick;return Object(h.jsx)("li",{className:"ImageGalleryItem",children:Object(h.jsx)("img",{src:t,"data-source":a,alt:r,className:"ImageGalleryItem-image",onClick:function(e){return n({originUrl:a,tags:r})}})})}function b(e){var t=e.galleryData,a=e.onClick;return Object(h.jsx)("ul",{className:"ImageGallery",children:t&&t.map((function(e,t){var r=e.webformatURL,n=e.largeImageURL,o=e.tags;return Object(h.jsx)(d,{previewUrl:r,originUrl:n,tags:o,onClick:a},t)}))})}function f(e){var t=e.className,a=e.children,r=e.onClick;return Object(h.jsx)("button",{className:t,type:"button",onClick:r,children:a})}var j=a(11),v=a.n(j),O=document.getElementById("portal");function y(){return Object(o.createPortal)(Object(h.jsx)("div",{className:"Overlay",children:Object(h.jsx)(v.a,{type:"Oval",color:"#fff",height:150,width:150})}),O)}var w,C,S=a(9),k=(a(38),{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}),x=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).stateDefault={pageNumber:1,perPage:12},e.state={pageNumber:e.stateDefault.pageNumber,images:null,showLoadMoreBtn:!1,status:"idle",error:null},e.getImages=function(t,a,r,n){e.setState({status:"pending"}),p(t,a,r).then((function(a){var r=a.hits;if(0===a.totalHits)return e.setState({images:null,showLoadMoreBtn:!1,status:"rejected"}),void S.b.error('By query "'.concat(t,'" images not found'),k);r.length<12?(S.b.warn('That is all we found by query "'.concat(t,'"'),k),e.setState({showLoadMoreBtn:!1,status:"resolved"})):e.setState({showLoadMoreBtn:!0,status:"resolved"}),e.setState({images:n?[].concat(Object(g.a)(n),Object(g.a)(a.hits)):Object(g.a)(a.hits)}),n?e.smoothScrollDown():e.smoothScrollUp()})).catch((function(t){e.setState({error:t.message})}))},e.onLoadMoreBtnClick=function(t){t.preventDefault(),e.setState((function(e){return{pageNumber:e.pageNumber+1}}))},e.resetPageNubmer=function(){e.setState({pageNumber:e.stateDefault.pageNumber})},e.smoothScrollDown=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},e.smoothScrollUp=function(){window.scrollTo({top:document.getElementById("root"),behavior:"smooth"})},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=e.searchQuery,r=this.props.searchQuery,n=this.stateDefault.pageNumber,o=this.stateDefault.perPage,c=t.pageNumber,s=this.state.pageNumber,l=t.images;a!==r&&(this.resetPageNubmer(),this.getImages(r,n,o)),s>c&&this.getImages(a,s,o,l)}},{key:"render",value:function(){var e=this.state,t=e.images,a=e.showLoadMoreBtn,r=e.status,n=this.props.onClick,o=this.onLoadMoreBtnClick;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(b,{galleryData:t,onClick:n}),a&&Object(h.jsx)("div",{className:"ButtonWrapper",children:Object(h.jsx)(f,{className:"Button",onClick:o,children:"Load more"})}),"pending"===r&&Object(h.jsx)(y,{}),Object(h.jsx)(S.a,{})]})}}]),a}(r.Component),I=["title","titleId"];function N(){return N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},N.apply(this,arguments)}function B(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function M(e,t){var a=e.title,n=e.titleId,o=B(e,I);return r.createElement("svg",N({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",ref:t,"aria-labelledby":n},o),a?r.createElement("title",{id:n},a):null,w||(w=r.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),C||(C=r.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})))}var E=r.forwardRef(M),L=(a.p,document.getElementById("portal")),D=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).onBackdropClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e.onEscape=function(t){"Escape"===t.code&&e.props.onClose()},e.onCloseBtnClick=function(t){t.preventDefault(),e.props.onClose()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.onEscape)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.onEscape)}},{key:"render",value:function(){var e=this.props.image,t=e.url,a=e.tags,r=this.onBackdropClick;return Object(o.createPortal)(Object(h.jsxs)("div",{className:"Overlay",onClick:r,children:[Object(h.jsx)("img",{src:t,alt:a}),Object(h.jsx)(f,{className:"CloseModalButton",onClick:this.onCloseBtnClick,children:Object(h.jsx)(E,{})})]}),L)}}]),a}(r.Component),U=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={searchQuery:null,modalImageInfo:null,showModal:!1},e.onSearchbarSubmit=function(t){t.trim()?e.setState({searchQuery:t}):alert("Empty query")},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal,modalImageInfo:e.modalImageInfo&&null}}))},e.onImageClick=function(t){var a=t.originUrl,r=t.tags;e.toggleModal(),e.setState({modalImageInfo:{url:a,tags:r}})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state,t=e.searchQuery,a=e.showModal,r=e.modalImageInfo,n=this.onSearchbarSubmit,o=this.toggleModal,c=this.onImageClick;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(m,{onSubmit:n}),Object(h.jsx)(x,{searchQuery:t,onClick:c}),a&&Object(h.jsx)(D,{onClose:o,image:r})]})}}]),a}(r.Component);c.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(U,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.773aa3a5.chunk.js.map